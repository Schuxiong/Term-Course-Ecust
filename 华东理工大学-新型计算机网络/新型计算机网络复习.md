# TCP/IP 协议 

1. ### OSI/RM 与 TCP/IP 之间的对应关系。 

   TCP/IP 四层模型包括 网络接口层,网络层,传输层 和应用层

   * 网络接口层 对应 OSI的物理层和数据链路层 :发送物理帧
   * 网络层 对应 OSI 的网络层 : 寻址和路由选择
   * 传输层对应 OSI的传输层: 不同主机进程间提供端到端的通信服务
   * 应用层对应OSI的会话层 : 处理应用程序相关的功能

2. ### 路由器中有哪些协议？ 

   * 路由协议:
     * 内部网关协议(IGP):比如RIP协议,OSPF协议
     * 外部网关协议(EGP): 主要是BGP协议
   * 网络层协议: IPv4 IPv6
   * 传输层协议:支持TCP和UDP协议

3. ### 以太网通过什么协议来控制节点对总线的访问？ 

   以太网采用CSMA/CD 协议来控制节点对总线的访问

   * 发送数据前:节点监听总线是否空闲, 空闲就开始发送 否则就等待
   * 发送同时还会检测冲突,如果冲突就会立即停止发送数据 并发送阻塞信号 等待一段时间后再次发送

4. ### 以太网帧中如何区分单播、多播和广播？ 

   * 单播: 目的MAC地址是一个唯一的物理地址,该帧只会被发送到具有这个特定MAC地址的设备
   * 多播:目的MAC地址的第一个字节最低位是1,其他部分为多播组的标识符,这样的帧会被发送到同一多播组中的所有设备
   * 广播: 目的mac地址是全1 (FF-FF....) 发送到网络中的所有设备

5. ### 判断题：IP 协议是可靠的面向连接的协议，还是不可靠的无连接协议。 

   - 答案：IP 协议是不可靠的无连接协议。
   - 解释：IP 协议只是**尽力**将数据包从源节点发送到目的节点。它不保证数据包一定能到达目的地，也不保证数据包的顺序以及是否有重复。在传输过程中，**数据包可能会丢失、乱序或者出现重复的情况，这些问题需要由上层协议（如 TCP）来处理。**

6. ### IP 数据报分片填写，只需关注总长度、IP 分组三字段以及最后的数据部分。 

   - 答案：这种说法是错误的。
   - 解释：在 IP 数据报分片时，除了要关注总长度、标识、标志（其中有 MF 位和 DF 位用于表示是否还有分片和是否允许分片）这三个字段以及数据部分外，**还需要关注片偏移字段。片偏移字段指出本片数据在初始 IP 数据报数据区中的位置**，以 8 字节为单位。这些字段协同工作，使得接收端能够正确地重组分片后的 IP 数据报。

7. ### 松散源和严格源路由的区别，可通过例子进行说明。 

   - **严格源路由**：发送方规定了 IP 数据报必须经过的路径上的每一个路由器的 IP 地址。例如，从主机 A 发送数据报到主机 B，规定必须依次经过路由器 R1、R2、R3，中间不能经过其他路由器。数据报严格按照这个指定的路径传输，若无法按此路径传输则会导致传输失败。
   - **松散源路由**：发送方规定了数据报必须经过的一些路由器的 IP 地址，但允许数据报在这些指定路由器之间可以经过其他路由器。比如，从主机 A 发送数据报到主机 B，规定要经过路由器 R1 和 R3，那么数据报可以是 A - R1 - R2 - R3 - B 这样的路径，只要保证经过了 R1 和 R3 就行。

8. ### 选择题：哪个地址可作为 C 类地址？ 

   - 答案：C 类 IP 地址的范围是 192.0.0.0 - 223.255.255.255。
   - 解释：C 类地址的特点是第一个字节的十进制范围是 192 - 223，并且默认子网掩码是 255.255.255.0。例如，192.168.1.1 就是一个典型的 C 类地址，它用于小型网络，可容纳的主机数量相对较少，理论上一个 C 类网络可以有 254 台主机（因为要减去网络地址和广播地址）。

9. ### 最长前缀匹配，通过实例选择合适路由。 

   - 解释：
     - 假设路由表中有以下几条路由条目：
       - 路由 1：192.168.0.0/16
       - 路由 2：192.168.1.0/24
       - 路由 3：192.168.1.128/25
     - 当收到一个目的地址为 192.168.1.100 的 IP 数据报时，通过最长前缀匹配原则，应该选择路由 2。因为 / 24 的掩码长度大于 / 16，且 192.168.1.100 在 192.168.1.0/24 这个子网范围内。最长前缀匹配是为了更精确地找到目的网络，避免将数据报发送到范围过大的网络中。

10. ### 二叉线索，给一定数量的 IP 地址，生成对应二叉线索。

    - 解释：
      - 假设给定 IP 地址为 192.168.1.0、192.168.1.64、192.168.1.128、192.168.1.192。
      - 首先，将整个地址空间作为根节点，范围是 0.0.0.0 - 255.255.255.255。
      - 第一次划分可以按照第一个子网掩码位（例如 / 1），将地址空间分为两部分，0.0.0.0 - 127.255.255.255 和 128.255.255.255 - 255.255.255.255。
      - 对于包含给定 IP 地址的部分（这里是 128.255.255.255 - 255.255.255.255），继续按照下一个子网掩码位（例如 / 2）划分，得到 128.0.0.0 - 191.255.255.255 和 192.0.0.0 - 255.255.255.255。
      - 不断重复这个过程，直到每个叶子节点包含一个给定的 IP 地址或者一个子网范围，最终形成一个二叉线索树，通过这个树可以快速地查找 IP 地址所属的子网。

    ###  

11. ### ARP 和 RARP 的实现的功能：IP 地址和物理地址的互相转换。 

    - 答案：ARP（地址解析协议）实现从 IP 地址到物理地址（MAC 地址）的转换。RARP（逆地址解析协议）实现从物理地址到 IP 地址的转换。
    - 解释：
      - **ARP 工作过程**：当主机 A 要发送数据给同一局域网中的主机 B 时，它知道主机 B 的 IP 地址，但不知道其 MAC 地址。主机 A 就会在局域网中**广播一个 ARP 请求包**，询问 “IP 地址是 [主机 B 的 IP 地址] 的主机的 MAC 地址是多少？”。这个局域网中的所有主机都会收到这个请求，但只有主机 B 会识别出这个 IP 地址是自己的，然后主机 B 会向主机 A 发送一个 ARP 应答包，里面包含自己的 MAC 地址。这样主机 A 就得到了主机 B 的 MAC 地址，从而可以进行数据发送。
      - **RARP 工作过程**：主要用于无盘工作站。无盘工作站知道自己的物理地址，但不知道自己的 IP 地址。它会广播一个 RARP 请求，其中包含自己的物理地址。**网络中的 RARP 服务器收到这个请求后，会根据预先配置的物理地址 - IP 地址映射表**，查找对应的 IP 地址，然后将这个 IP 地址发送给无盘工作站。

12. ### 基于 RIP 协议和 v-d 路由算法，更新给定网络、指定节点的路由表。 

    - 解释：

      - 假设一个简单的网络有三个节点 A、B、C，它们之间通过链路相连。初始时，节点 A 的路由表如下：
        | 目的节点 | 下一跳 | 距离（跳数）|
        | ---- | ---- | ---- |
        |A| - |0|
        |B | 直接相连 | 1|
        |C | 直接相连 | 1|

      - 假设节点 B 到节点 C 的链路出现故障**。根据 RIP 协议的 v - d（距离矢量）路由算法，节点 B 会向邻居节点（这里是节点 A）发送更新后的路由信息**，表明到节点 C 的距离为无穷大（在 RIP 中用 16 表示不可达）。

      - 节点 A 收到这个更新后，会重新计算到节点 C 的路由。因为之前到节点 C 是通过直接相连（跳数为 1），现在收到节点 B 的更新信息显示无法到达，节点 A 会更新自己的路由表，将到节点 C 的下一跳改为无穷大（16），表示不可达。

13. ### TCP 和 UDP 的对比，可靠的面向连接的协议，不可靠的无连接协议。

    - 答案：TCP 是可靠的面向连接的协议，UDP 是不可靠的无连接协议。
    - 解释：
      - **TCP**：在传输数据前，TCP 需要通过三次握手建立连接。
        * 在数据传输过程中，发送方会等待接收方的确认信息（ACK），如果没有收到 ACK，会进行重传。
        * 同时，TCP 通过序列号和确认号来保证数据的顺序和完整性。另外，TCP 还具有流量控制（通过滑动窗口机制）和拥塞控制（如慢启动、拥塞避免等算法）功能，以确保网络的高效利用和数据的可靠传输。
      - **UDP**：UDP 在发送数据前不需要建立连接，**它只是简单地将数据封装成 UDP 包并发送出去。UDP 不保证数据的可靠传输，数据可能会丢失、重复或者乱序，也没有流量控制和拥塞控制机制**。不过，UDP 具有传输速度快、开销小的优点，适用于一些对实时性要求高但对数据可靠性要求不高的应用，如实时视频流、在线游戏等。

    ###  

14. ### TCP 为保障数据传输服务，在建立连接时，使用三次握手机制，并采用动态滑动窗口机制进行流量控制与拥塞控制。 

    - 三次握手建立连接
      - 第一次握手：客户端向服务器发送一个 SYN（同步）包，其中包含客户端的初始序列号（ISN），这个包表示客户端希望建立连接。
      - 第二次握手：服务器收到客户端的 SYN 包后，会向客户端发送一个 SYN - ACK 包。这个包中包含服务器自己的初始序列号，同时确认收到客户端的序列号，确认号为客户端的 ISN + 1。
      - 第三次握手：客户端收到服务器的 SYN - ACK 包后，会向服务器发送一个 ACK 包，确认号为服务器的 ISN + 1。经过这三次握手，双方就建立了一个可靠的连接，可以开始传输数据。
    - 动态滑动窗口机制进行流量控制与拥塞控制
      - **流量控制**：接收方会告诉发送方自己的接收窗口大小，发送方根据这个窗口大小来调整自己的发送速率。例如，接收方的接收窗口为 100 字节，发送方就最多只能发送 100 字节的数据，当接收方处理了一部分数据后，接收窗口会变大，发送方可以发送更多的数据。
      - **拥塞控制**：TCP 采用了多种拥塞控制算法。在慢开始阶段，发送方会以指数增长的方式增加发送窗口大小，快速探测网络的拥塞程度。当发现网络出现拥塞迹象（如出现丢包）时，就会进入拥塞避免阶段，发送窗口以线性方式增长。通过这种动态的方式，TCP 可以在保证数据可靠传输的同时，充分利用网络带宽，避免过度拥塞。

15. ### 慢开始和拥塞避免算法的实现。 

    - **慢开始**：在 TCP 连接建立初期，发送方设置一个较小的拥塞窗口（cwnd），初始值通常为 1 个 MSS（最大报文段长度）。发送方每收到一个对新发送数据的确认（ACK），就将 cwnd 增加 1 个 MSS。例如，第一次发送 1 个 MSS 的数据，收到 ACK 后，cwnd 变为 2 个 MSS，下次就可以发送 2 个 MSS 的数据，再收到 2 个 ACK 后，cwnd 变为 4 个 MSS，以此类推，cwnd 以指数形式增长。
    - **拥塞避免**：当 cwnd 增长到一个阈值（ssthresh）时，就进入拥塞避免阶段。在这个阶段，发送方每收到一个 ACK，cwnd 不再以指数增长，而是增加 1/cwnd 个 MSS，使得 cwnd 以线性方式缓慢增长。例如，cwnd 为 8 个 MSS，收到一个 ACK 后，cwnd 变为 8 + 1/8 个 MSS。
    - **检测拥塞和调整**：如果发送方检测到网络拥塞（通常通过超时未收到 ACK 或者收到多个重复的 ACK 来判断），就会将 ssthresh 设置为当前 cwnd 的一半，并且将 cwnd 重新设置为 1 个 MSS，然后重新开始慢开始阶段。这样可以快速降低发送速率，缓解网络拥塞。

16. ### 以太网帧解析。 

    - **前导码（Preamble）和帧起始定界符（SFD）**：前导码是 7 个字节的 10101010，用于使接收方的物理层进行时钟同步。帧起始定界符是 10101011，用于标志着以太网帧的开始。这部分总共 8 个字节，在接收端处理时，主要用于同步和识别帧的开始。
    - **目的 MAC 地址（Destination MAC Address）**：6 个字节，用于指定接收帧的目的设备的物理地址。通过这个地址，以太网交换机或者网卡可以确定帧应该被转发到哪个设备。
    - **源 MAC 地址（Source MAC Address）**：也是 6 个字节，用于标识发送帧的设备的物理地址。
    - **类型 / 长度（Type/Length）字段**：2 个字节。当这个字段的值小于等于 1500 时，表示数据字段的长度；当这个值大于 1500 时，表示上层协议的类型，例如 0x0800 表示 IP 协议，0x0806 表示 ARP 协议等。
    - **数据（Data）字段**：长度在 46 - 1500 字节之间。这个字段用于承载上层协议的数据，如 IP 数据包等。如果数据部分不足 46 字节，会填充一些字节以达到最小长度要求。
    - **帧校验序列（FCS）**：4 个字节，采用 CRC（循环冗余校验）算法对目的 MAC 地址、源 MAC 地址、类型 / 长度字段和数据字段进行校验，用于接收方检查帧在传输过程中是否出现错误。如果接收方计算的 CRC 与 FCS 中的值不一致，就会丢弃这个帧。

# IPv6 

1. ### 路由器全连接网络 IP 地址分配，IPv6 综述课件 p11。 

   ![image-20241118001021951](C:\Users\74140\AppData\Roaming\Typora\typora-user-images\image-20241118001021951.png)

2. ### 针对 IPv4 地址枯竭问题提出的改进措施，共三个。 

   * **NAT（网络地址转换）**：通过在专用网络和公共网络之间进行地址转换，使得多个内部私有 IP 地址可以共享一个或少数几个公共 IP 地址访问互联网。例如，一个企业内部有许多台计算机使用私有 IP 地址（如 192.168.x.x），通过 NAT 设备将这些内部地址转换为一个或几个合法的公共 IP 地址与外部网络通信，从而节省了公共 IPv4 地址。

   - **CIDR（无类别域间路由）**：CIDR 取消了传统的 A 类、B 类、C 类网络的划分，采用可变长子网掩码（VLSM）来分配 IP 地址。它允许将多个连续的 C 类网络合并成一个更大的网络，这样可以更灵活地分配 IP 地址，减少地址浪费。例如，将多个 / 24 的 C 类网络合并为一个 / 22 的网络进行分配。
   - **IPv6 的逐步部署**：IPv6 拥有巨大的地址空间，从根本上解决了 IPv4 地址枯竭的问题。通过逐步在网络中引入 IPv6，让新的设备和网络应用支持 IPv6，最终实现从 IPv4 到 IPv6 的过渡，这也是解决 IPv4 地址不足的长远之计。

3. ### IPv6 为提高 QoS 所设计的两个主要协议。 

   - **ntServ（综合服务）**：它提供了一种端到端的 QoS 保证机制。通过资源预留协议（RSVP），在发送数据之前，源节点向网络请求特定的服务质量，网络中的路由器根据请求为该数据流预留资源，如带宽、缓存等。例如，对于实时视频会议等对带宽和延迟要求较高的应用，可以使用 IntServ 来确保服务质量。
   - **DiffServ（区分服务）**：DiffServ 将数据包分为不同的类别或优先级。在网络边缘，数据包被分类并标记上不同的 DSCP（差分服务代码点）值，网络中的路由器根据这些标记对数据包进行不同的处理。例如，语音流量标记为高优先级，尽力而为的普通数据流量标记为低优先级，路由器根据这些标记来优先转发高优先级的数据包，从而提高关键业务的 QoS。

4. ### IPv6 的安全性协议是什么？ 

   - IPv6 使用 IPsec（IP 安全协议）来提供安全性。IPsec 是一套协议套件，包括认证头（AH）协议和封装安全载荷（ESP）协议。
   - **认证头（AH）协议**：主要用于提供数据完整性和数据源认证。它可以验证数据包的来源是否合法，并且保证数据包在传输过程中没有被篡改。例如，在两个网络节点之间传输敏感数据时，通过 AH 协议可以确保接收方收到的数据是由合法的发送方发送的，并且数据没有被恶意修改。
   - **封装安全载荷（ESP）协议**：除了提供数据完整性和数据源认证外，还提供数据保密性。ESP 协议会对数据包的内容进行加密，这样即使数据包在传输过程中被截获，攻击者也无法获取其中的内容。例如，对于企业内部的机密信息传输，使用 ESP 协议可以防止信息泄露。

5. ### IPv6 针对 IPv4 设计的过渡技术是什么？ 

   - **双栈技术**：主机或路由器同时运行 IPv4 和 IPv6 两种协议栈。这样的设备可以同时处理 IPv4 和 IPv6 的数据包，使得在 IPv4 和 IPv6 网络共存的时期，能够与两种网络进行通信。例如，一个双栈主机在访问只支持 IPv4 的网站时使用 IPv4 协议栈，在访问支持 IPv6 的网站时使用 IPv6 协议栈。
   - **隧道技术**：将 IPv6 数据包封装在 IPv4 数据包中，通过 IPv4 网络进行传输。在隧道的入口处，将 IPv6 数据包作为 IPv4 数据包的负载进行封装，在隧道的出口处，再将 IPv6 数据包解封装出来。例如，在两个 IPv6 孤岛之间通过 IPv4 网络连接时，可以使用隧道技术来实现 IPv6 数据包的传输。
   - **协议转换技术（如 NAT - PT）**：用于在 IPv4 和 IPv6 网络之间进行协议和地址的转换。NAT - PT 可以将 IPv6 地址转换为 IPv4 地址，并且对数据包的协议头进行适当的转换，使得 IPv6 和 IPv4 网络之间能够进行通信。不过这种技术存在一些局限性，如破坏了端到端的 IPsec 安全机制等。

6. ### 选择题：下面哪一个地址是正确的 IPv6 地址表示形式？0 压缩。 

   - IPv6 地址通常是 8 组，每组 4 个十六进制数字，用冒号分隔。0 压缩是指可以将连续的 0 组用双冒号（::）来代替，但在一个 IPv6 地址中，双冒号只能出现一次。例如，2001:0db8:0000:0000:0000:0000:1428:57ab 可以写成 2001:0db8::1428:57ab。

7. ### 单播和任播的区别。 

   - **单播（Unicast）**：是一对一的通信方式。一个单播 IPv6 地址唯一地标识一个网络接口，数据包从一个源地址发送到一个目的地址。例如，当你从你的计算机访问一个网站服务器时，你的计算机的 IPv6 地址作为源地址，网站服务器的 IPv6 地址作为目的地址，这种通信就是单播。
   - **任播（Anycast）**：是一对多中的一个通信方式。任播地址被分配给多个网络接口（通常属于不同的节点），当一个数据包发送到任播地址时，只有距离发送方最近（根据路由协议的度量）的一个接口会接收这个数据包。例如，在内容分发网络（CDN）中，多个服务器可能共享一个任播地址，当用户请求访问时，请求会被路由到离用户最近的服务器，提高服务效率。

8. ### 可聚合全局单播地址和任播地址的格式前缀。 

   - **可聚合全局单播地址**：格式前缀一般为 001（二进制），这部分用于标识地址的类型是可聚合全局单播地址，用于全球范围内的路由和寻址，使得全球 IPv6 网络能够有效地聚合路由信息。
   - **任播地址**：从语法上看，任播地址使用与单播地址相同的格式，没有专门的格式前缀来区分。任播地址的分配通常是基于特定的应用场景和服务提供商的配置，将单播地址赋予多个接口使其具有任播功能。

9. ### 基于 IEEE EUI-64 将给出的 48 位以太网 MAC 地址映射成 64 位的接口 ID。 

   - 首先，将 48 位 MAC 地址分成两部分，前 24 位和后 24 位。在中间插入 FFFE（十六进制）。然后，将 MAC 地址的第一个字节的第七位（从左往右数，0 位开始）进行翻转。例如，对于 MAC 地址 00 - 11 - 22 - 33 - 44 - 55，插入 FFFE 后变为 001122 - FFFE - 334455，然后如果第一个字节的第七位原来是 0，则变为 1，原来是 1 则变为 0，从而得到 64 位的接口 ID。

10. ### 判断题：世界上成立最早、规模最大的全球范围的 IPv6 示范网是 6Bone。 

    - 答案是正确的。6Bone 是早期 IPv6 研究和试验的重要网络，它在推动 IPv6 的发展和应用方面起到了巨大的作用，是世界上成立最早、规模较大的全球范围的 IPv6 示范网，为 IPv6 的技术验证、应用测试等提供了平台。

11. ### 给定节点所在的子网地址和一个接口网卡的 MAC 地址，生成该节点自己的 IPv6 地址。 

    - 首先，将子网地址和通过 IEEE EUI - 64 转换后的接口 ID（由 MAC 地址转换而来）组合起来。例如，如果子网地址是 2001:0db8​ : 1234:5678::/64，通过 MAC 地址转换后的接口 ID 是 0211:22FF:FE33:4455，那么该节点的 IPv6 地址就是 2001:0db8: 1234:5678:0211:22FF:FE33:4455。

12. ### 给定一个 IPv6 单播地址，判断它是哪一类单播地址。 

    - **可聚合全局单播地址**：如果地址的格式前缀是 001（二进制），通常是可聚合全局单播地址，用于全球范围的通信和寻址。
    - **链路本地单播地址**：以 FE80::/10 开头的是链路本地单播地址，这种地址仅用于在本地链路（如一个局域网）内进行通信，不能在不同链路之间直接转发。
    - **唯一本地单播地址**：以 FC00::/7 开头的是唯一本地单播地址，类似于 IPv4 中的私有地址，用于在本地网络内部通信，不会在全球互联网上进行路由。

13. ### 给定一个 IPv6 多播地址，判断它是否永久分配给对应多播组。若不是，给出其作用范围。可以考虑进一步设计连线题。 

    - IPv6 多播地址的格式前缀为 FF00::/8。其中，一些多播地址是永久分配给特定多播组的，如 FF02::1 表示本地链路所有节点的多播组，FF02::2 表示本地链路所有路由器的多播组。对于非永久分配的多播地址，其作用范围可以是本地链路（以 FF02 开头）、站点本地（以 FF05 开头）或全局范围（以 FF0E 开头等），具体要看地址的具体设置和应用场景。可以设计连线题，将多播地址与对应的作用范围和多播组类型进行连线，帮助更好地理解和区分。

14. ### 由单播/任播地址形成被请求节点多播地址，可以给出前缀 ff02::1:ff00:0/104。 

    - 对于给定的单播或任播 IPv6 地址，通过将其最后 24 位（接口 ID 的后 24 位）替换到前缀 ff02::1:ff00:0/104 的后 24 位，就可以得到被请求节点多播地址。这个被请求节点多播地址主要用于邻居发现等过程，例如在进行地址解析（将 IPv6 地址转换为 MAC 地址）时，节点会向这个被请求节点多播地址发送请求。

15. ### 给定一个传输过程，填写首部和源路由扩展首部的变化情况。

    - 这需要根据具体的传输场景和所涉及的协议来确定。一般来说，在 IPv6 数据报传输过程中，源路由扩展首部会记录数据包需要经过的路径信息。当数据包经过每一个中间节点时，可能会更新首部中的跳数限制（类似于 IPv4 中的 TTL），并且根据源路由扩展首部的信息决定下一跳的地址。如果中间节点发现自己不是源路由指定的下一跳，可能会根据路由策略转发数据包到正确的下一跳，并更新相应的首部信息。

    ###  

16. ### IPv6 数据报分片填写，关注下一首部、有效载荷长度、偏移量、分片标志、有效载荷数据量大小。分片重组后的填写，关注下一个首部和有效载荷长度。 

    * 分片时

      - **下一首部**：与原始 IPv6 数据报的下一首部相同，用于标识分片后数据部分的上层协议类型。

      - **有效载荷长度**：每个分片都有自己的有效载荷长度，所有分片的有效载荷长度之和等于原始数据报的有效载荷长度。

      - **偏移量**：以 8 字节为单位，记录分片数据在原始数据报中的位置。例如，第一个分片的偏移量为 0，第二个分片如果其数据部分在原始数据报中从第 8 字节开始，那么偏移量为 1。

      - **分片标志**：用于标识是否还有后续分片以及该分片是否是最后一个分片。

      - **有效载荷数据量大小**：即每个分片实际承载的数据量大小，要保证每个分片的数据量大小不超过路径 MTU（最大传输单元）减去 IPv6 首部固定长度（40 字节）。

    - 重组后
      - **下一个首部**：和原始数据报的下一个首部一样，用于继续向上层协议交付数据。
      - **有效载荷长度**：等于所有分片有效载荷长度之和，恢复到原始数据报的有效载荷长度。

17. ### 目的端分片重组的丢弃三原则。 

    - **无法完成重组**：如果部分分片丢失，导致无法完成整个数据报的重组，那么整个数据报将被丢弃。例如，接收端收到了部分分片，但由于某些分片没有按时到达或者丢失，无法按照偏移量和分片标志等信息完成重组，就会丢弃这些分片。
    - **超时未完成重组**：如果在规定的时间内没有收到所有的分片，无法完成重组，也会将已收到的分片丢弃。这个时间限制通常是由接收端的协议栈设置的，目的是避免等待已经丢失的分片而浪费资源。
    - **重组后的长度不符合要求**：如果重组后的有效载荷长度不符合原始数据报的预期长度（可能是由于分片错误或者恶意篡改），那么重组后的数据报也会被丢弃。

18. ### IPv6 的安全体系 IPsec 中的两个扩展首部分别是什么？ 

    - **认证头（AH）扩展首部**：提供数据完整性和数据源认证。它对整个 IP 数据报（除了可变的 IP 首部字段，如跳数限制等）进行认证，接收方可以通过验证 AH 扩展首部来确认数据是否被篡改以及来源是否合法。
    - **封装安全载荷（ESP）扩展首部**：提供数据保密性、数据完整性和数据源认证。ESP 可以对数据报中的数据部分进行加密，同时也可以提供认证功能。在实际应用中，根据安全需求可以单独使用 AH 或 ESP，或者两者结合使用来提供不同级别的安全保障。

# 多播技术 

1. ### 单播和广播分别有什么缺陷？ 

   - 单播缺陷
     - **效率问题**：在一对多通信场景下效率较低。例如，一个服务器要向大量客户端发送相同的数据，如软件更新包。如果使用单播，服务器需要分别为每个客户端建立单独的连接并发送数据，会消耗大量的网络带宽和服务器资源，因为相同的数据需要重复发送多次。
     - **扩展性差**：随着接收端数量的增加，源端的负担会呈线性增加，难以满足大规模的通信需求。
   - 广播缺陷
     - **资源浪费**：广播会将数据发送给网络中的所有设备，不管这些设备是否需要接收该数据。例如，在一个大型局域网中，如果一台计算机发送广播消息，所有设备都要处理这个消息，这会占用不必要的网络带宽和设备的处理资源，对于那些对该消息不感兴趣的设备来说，这是一种资源浪费。
     - **安全隐患**：广播消息可以被网络中的任何设备接收，这可能会带来安全风险。例如，恶意用户可以利用广播来收集网络中的信息或者进行广播风暴攻击，导致网络瘫痪。

2. ### 选择题：互联网多播系统需要有三个概念性组成部分。 

   1. - 答案通常是多播源、多播组和接收者。多播源是发送多播数据的节点，多播组是一个由多个接收者组成的逻辑组，接收者是加入多播组并接收多播数据的节点。它们共同构成了互联网多播系统的基本架构，使得数据能够从一个源高效地发送到多个接收者。

3. ### IP 多播组对应的 D 类 IP 地址格式和范围。 

   - IP 多播组使用 D 类 IP 地址，D 类 IP 地址的格式是以 “1110” 开头的二进制地址，即 224.0.0.0 - 239.255.255.255。这个范围内的地址专门用于多播通信，不同的多播组会被分配不同的 D 类 IP 地址，用于在网络中标识该多播组，使得发送到这个地址的数据包能够被相应多播组的成员接收。

4. ### 判断题：永久地址组中的组成员不是永久的。 

   - 答案是正确的。虽然是永久地址组，但组成员可以根据实际情况加入或离开该组。例如，某些网络管理场景下会定义一些永久的多播组用于特定的功能，如网络设备发现等，但设备（组成员）可能会因为故障、关机、网络配置调整等原因而暂时或永久地离开这个多播组。

5. ### 选择题：在给定的地址中，选出用户组播地址。

   - 首先要明确用户组播地址属于 D 类 IP 地址范围（224.0.0.0 - 239.255.255.255）。例如，224.0.0.1 是本地子网所有主机组播地址，239.255.255.255 是本地管理组播地址限制在本地范围，这些都属于用户组播地址的范畴，需要根据具体选项来判断哪些是符合要求的用户组播地址。

   ###  

6. ### IP 多播地址与物理多播地址的映射。 

   在以太网中，IP 多播地址到物理多播地址（MAC 地址）的映射是通过一定的规则实现的。IP 多播地址的低 23 位被映射到 MAC 地址的低 23 位，而 MAC 地址的高 25 位固定为 01 - 00 - 5E。这种映射方式使得多个 IP 多播组可能会映射

7. ### 选择题：多播组作用域使用生存时间和确定管理范围两项技术进行控制。 

   - TTL 用于限制多播数据报在网络中传播的范围，每经过一个路由器，TTL 值就会减 1，当 TTL 值为 0 时，数据报就会被丢弃。确定管理范围是通过地址分配和策略配置等方式来规定多播组的作用区域，例如，将某些多播组限制在一个特定的自治系统或者一个企业内部网络中，从而实现对多播组作用域的有效控制。

8. ### IGMPv1 定义了基本的组成员查询和报告功能，IGMPv2 相对于 IGMPv1 增加了组成员快速离开的机制，IGMPv3 可进一步制定接收或不接收特定多播源的报文。 

  - **IGMPv1**：工作过程相对简单。路由器周期性地发送通用查询消息，询问网络中有哪些主机属于某个多播组。主机如果想接收多播数据，会在收到查询消息后发送报告消息，表示自己属于某个多播组。但它没有快速离开机制，当主机离开多播组时，路由器需要等待一段时间才能发现。
  - **IGMPv2**：在 IGMPv1 的基础上增加了快速离开机制。当主机离开多播组时，会立即发送离开组消息给路由器。路由器收到这个消息后，会立即发送特定组查询消息，以确定该多播组是否还有其他成员，如果没有，就停止向这个多播组转发数据，提高了网络资源的利用效率。
  - **IGMPv3**：可以让主机指定接收或不接收来自特定多播源的报文。这使得主机在多播通信中有了更精细的控制能力，能够根据自己的需求选择接收或过滤来自不同多播源的数据。

9. ### 报文类型与目的 IP 地址之间的对应关系。 

   - 在 IGMP 协议中，查询报文（如 IGMPv1 的通用查询报文、IGMPv2 的特定组查询报文）的目的 IP 地址通常是 224.0.0.1（代表本地子网所有主机），因为路由器需要向子网内的所有主机询问多播组成员信息。而主机发送的报告报文（如 IGMPv1 和 IGMPv2 的成员关系报告）的目的 IP 地址是多播组地址，用于告知路由器自己属于该多播组，以便路由器将多播数据转发到该多播组。在 IGMPv3 中，报告报文可能还会包含针对特定多播源的信息，目的 IP 地址同样是多播组地址。

10. ### 根据多播组与计时器信息，计算基于报告抑制机制，最终需要发送几个响应报文。 

    - 报告抑制机制是指在主机收到查询报文后，会启动一个随机计时器。如果在计时器超时之前，主机听到其他主机已经发送了相同多播组的报告报文，自己就不再发送。例如，假设有一个多播组，在收到查询报文后，有 3 台主机的计时器分别为 3 秒、5 秒和 7 秒，第一台主机计时器先超时，发送了报告报文，那么另外两台主机听到这个报告后就会抑制自己的报告发送，最终只会发送 1 个响应报文。

11. ### IGMPv1 的两个缺陷是什么？ 

    - **没有快速离开机制**：如前面所述，当主机离开多播组时，IGMPv1 没有办法立即通知路由器，路由器只能依靠周期性的查询来发现组成员的离开，这会导致在一段时间内，路由器可能还在向没有成员的多播组转发数据，浪费网络资源。
    - **不支持主机指定接收源**：IGMPv1 的主机只能报告自己属于某个多播组，不能像 IGMPv3 那样指定接收或不接收来自特定多播源的报文，在多播源选择方面缺乏灵活性。

12. ### 主机如何判断发送查询报文的路由器运行的是哪个版本的 IGMP（v1 还是 v2）？可以根据路由器成员关系查询报文的第二个字节来判断，在 IGMPv1 中，第二个字节字段未使用，一般被置为 0，而在 IGMPv2 中，该字段对应最大响应时间，其值非 0。 

    - 当主机收到路由器发送的查询报文时，它会检查报文的第二个字节。如果这个字节是 0，那么主机可以判断路由器运行的是 IGMPv1；如果这个字节是非 0 的值，那么路由器运行的是 IGMPv2。这种判断方式使得主机能够根据路由器的 IGMP 版本来正确地响应查询，例如，IGMPv2 主机在收到 IGMPv1 查询时，会按照 IGMPv1 的规则响应，而在收到 IGMPv2 查询时，会利用新的功能，如快速离开机制等进行响应。

13. ### 基于源的树和共享树分别有什么优缺点？ 

    - 基于源的树（Source - Based Tree）优点
      - **路径优化**：对于每个多播源，都构建一个以源为根的树，数据从源到接收者的路径通常是最优的（最短路径），这样可以减少数据传输延迟，尤其适用于对延迟敏感的多播应用，如实时视频流等。
      - **独立性好**：每个源树相互独立，不会受到其他多播源的影响，便于进行单独的管理和维护，例如，在多源多播场景下，可以根据每个源的特点和要求来调整树的结构。
    - 基于源的树缺点
      - **资源消耗大**：需要为每个多播源构建和维护一棵独立的树，在多源多播情况下，会消耗大量的路由器资源，包括内存用于存储路由信息和 CPU 资源用于维护树的状态。
      - **可扩展性差**：随着多播源和接收者数量的增加，构建和管理众多源树会变得非常复杂，对网络的扩展性提出了挑战。
    - 共享树（Shared Tree）优点
      - **资源节省**：多个多播源可以共享同一棵树，减少了树的数量，从而节省了路由器的资源，如内存和 CPU 资源。对于大规模的多播网络，这种资源节省的优势更加明显。
      - **易于管理**：只需要维护一棵共享树，而不是为每个多播源维护一棵树，使得网络管理和配置更加简单，便于进行集中控制和调整。
    - 共享树缺点
      - **路径可能非最优**：从全局看，数据可能需要经过一些不必要的中间节点才能到达接收者，转发路径不一定是最短路径，这可能会导致数据传输延迟增加，对于一些对延迟敏感的应用不太友好。
      - **单点故障风险**：共享树通常依赖于一个或几个核心节点（如汇聚点 RP），如果这些核心节点出现故障，可能会影响整个多播服务，导致数据传输中断。

14. ### 判断题：从全局看，共享树的转发路径不一定最短。 

    - 答案是正确的。因为共享树是多个多播源共享的一棵树，数据从源到接收者可能需要先经过汇聚点（RP），然后再转发到接收者，这样的路径可能会比直接从源到接收者（基于源的树的方式）更长。尤其是当接收者和多播源在地理位置上比较接近，但共享树的结构使得数据需要绕经汇聚点时，路径明显不是最短的。

15. ### 基于一个给定的网络拓扑图，利用 Prim 算法，找到对应的最小生成树。 

    - Prim 算法的基本思想是从一个起始顶点开始，逐步添加边来构建最小生成树。首先，选择一个顶点作为起始点，将其加入最小生成树的顶点集合。然后，在连接这个顶点集合和剩余顶点的边中，选择权值最小的边，将对应的顶点加入顶点集合，重复这个过程，直到所有顶点都被加入到最小生成树的顶点集合中。在网络拓扑图中，边的权值可以表示链路的成本、带宽、延迟等因素，通过 Prim 算法找到的最小生成树可以用于构建多播树等网络结构，以优化网络资源的利用和数据传输。

16. ### DVMRP 中的逆向路径转发（RPF），要求能根据单播路由表，确定是否转发给出的多播分组。

    - 在 DVMRP 中，逆向路径转发（RPF）是一种重要的多播转发机制。当路由器收到一个多播分组时，它会检查该分组的源地址。根据单播路由表，确定从自己到源地址的接口（称为 RPF 接口）。如果多播分组是从 RPF 接口到达的，那么路由器会转发这个分组；否则，就会丢弃这个分组。这种机制可以有效地防止多播分组在网络中循环转发，确保多播数据沿着正确的路径传播。

17. ### DVMRP 和 MOSPF 分别是单播路由协议 RIP 和 OSPF 的多播扩展。 

    - **DVMRP（Distance Vector Multicast Routing Protocol）**：它是基于距离矢量的多播路由协议，是 RIP 的多播扩展。它通过周期性地交换路由信息来构建多播路由表，每个路由器都知道到每个多播源的距离和下一跳路由器。DVMRP 使用逆向路径转发（RPF）机制来转发多播分组，适用于中小型网络中的多播路由。
    - **MOSPF（Multicast OSPF）**：它是 OSPF 的多播扩展，基于链路状态算法。在 MOSPF 中，路由器会将多播链路状态信息加入到 OSPF 的链路状态通告（LSA）中，通过洪泛 LSA，每个路由器都能构建完整的多播拓扑图，从而计算出多播树。MOSPF 能够提供更精确的多播路由计算，但由于其复杂性和对资源的高要求，适用于大型网络中的多播路由。

18. ### 在 PIM-SM 协议中，成员主机加入或离开某一 RP 共享树，通过指定路由器处理和转发join、prune 和 register 报文来实现。 

    - 当成员主机希望加入一个多播组时，它会向本地网段的指定路由器（DR）发送 join 报文。DR 收到这个报文后，会将其转发给汇聚点（RP），沿着从 DR 到 RP 的路径上的路由器都会根据这个 join 报文来更新自己的转发表，建立从 RP 到成员主机的共享树分支。当主机离开多播组时，会发送 prune 报文，DR 收到后转发给 RP，沿途的路由器会相应地删除共享树中对应的分支。另外，当多播源开始发送数据时，与多播源直接相连的 DR 会向 RP 发送 register 报文，告知 RP 有新的多播源，然后 RP 会根据情况建立从 RP 到多播源的路径，从而完成整个多播数据的转发路径构建。

19. ### RP 收到由多播源发送来的第一个多播分组时，将从 RP 到源主机建立 SPT 树。在 PIM-SM协议中，SPT 树的建立通过 join 和 prune 报文来实现。

    - 当 RP 收到第一个多播分组时，它会向多播源发送 join 报文，这个报文会沿着单播路由的逆向路径传播，沿途的路由器根据这个 join 报文更新自己的转发表，建立从 RP 到源主机的路径，即 SPT 树。同时，如果在建立 SPT 树的过程中，发现某些分支不需要用于多播数据转发（例如没有接收者在这个分支下），路由器会发送 prune 报文来修剪这些分支，从而优化 SPT 树的结构，确保多播数据能够高效地从源主机通过 SPT 树转发到接收者。

20. ###  基于给定的网络拓扑图，分别填写 PIM-SM 协议中，共享树和基于源的树上各路由器对应的多播表项。 

    - 对于共享树，每个路由器的多播表项通常包括：入接口（指向 RP 的接口）、出接口（连接到接收者的接口）、多播组地址等信息。例如，对于连接 RP 的路由器，入接口是接收来自 RP 的多播数据的接口，出接口是将数据转发给下一级路由器或接收者的接口。
    - 对于基于源的树，多播表项包括：源地址、入接口（从多播源接收数据的接口）、出接口（将数据转发给接收者的接口）等。在填写这些表项时，需要根据网络拓扑图中的链路连接情况、路由器与多播源 / 接收者的位置关系以及 PIM - SM 协议的工作原理，如 join 和 prune 报文的转发路径等来确定每个路由器的具体表项内容。

21. ### 某个多播路由器在转发多播分组时，如果在附近找不到其它多播路由器，可采用隧道技术，实现单播路由器的多播分组转发。 

    - 当多播路由器处于一个没有其他多播路由器的区域时，它可以将多播分组封装在单播分组中，通过单播链路发送到有其他多播路由器的区域。在接收端，多播路由器会将单播分组解封装，还原多播分组并继续进行多播转发。这种隧道技术可以扩展多播网络的覆盖范围，使得多播数据能够跨越没有多播支持的区域进行传输。

22. ### IPv6 多播的两个基本协议是 MLD 协议和 PIM-SM 协议，其中，MLD 协议对应 IPv4 中的IGMP 协议。 

    - **MLD（Multicast Listener Discovery）协议**：用于在 IPv6 网络中发现多播组成员。它的功能和 IPv4 中的 IGMP 协议类似，路由器通过 MLD 协议发送查询报文来发现哪些主机是某个多播组的成员，主机则通过报告报文来告知路由器自己的多播组成员身份。
    - **PIM - SM（Protocol Independent Multicast - Sparse Mode）协议**：在 IPv6 多播中也起着重要作用，用于构建和维护多播树，实现多播数据的转发。它的工作原理和在 IPv4 中的类似，通过汇聚点（RP）来构建共享树，并且可以根据需要从共享树切换到基于源的树，以优化多播数据的转发路径。

# 无线网络 

1. ### CDMA 编码和解码。 

   - 编码
     - CDMA 的基本原理是基于扩频技术。在编码过程中，每个用户被分配一个唯一的伪随机码（PN 码），这个 PN 码的码片速率远高于信息数据的比特率。例如，假设信息数据速率是 1kbps，而 PN 码的码片速率可能是 1Mbps。
     - 当发送信息时，将信息数据的每个比特与 PN 码进行模 2 加运算。如果信息比特为 “1”，则用 PN 码表示；如果信息比特为 “0”，则用 PN 码的反码表示。这样就将原始信息数据扩展到了一个更宽的频带上，实现了编码过程。例如，信息比特 “1” 对应的 PN 码序列是 “1010”，那么编码后的序列就是 “1010”；如果信息比特是 “0”，对应的 PN 码反码序列是 “0101”，编码后的序列就是 “0101”。
   - 解码
     - 接收端使用与发送端相同的 PN 码进行解码。当接收到混合的信号后，将接收到的信号与对应的 PN 码进行相关运算。由于不同用户的 PN 码是相互正交（近似正交）的，通过相关运算可以将目标用户的信号提取出来。
     - 具体来说，将接收到的扩频信号与本地的 PN 码逐位相乘，然后将乘积结果相加（积分）。如果发送的信息比特是 “1”，那么在一个比特周期内，经过相关运算后得到的结果是一个较大的正值；如果发送的信息比特是 “0”，则得到一个较大的负值。根据这个结果的正负就可以恢复出原始的信息比特。

2. ### 选择题：WLAN 传输方式有红外线和无线电射频两种，扩频技术主要分为跳频扩频 FHSS和直接序列 DSSS 两种技术。 

   - 这是关于无线局域网（WLAN）基本传输方式和扩频技术的知识点。红外线传输方式受限于视线传播，并且传输距离较短，但安全性相对较高。无线电射频传输方式应用更为广泛，它能够穿透障碍物，传输距离相对较远。
   - 在扩频技术方面，跳频扩频（FHSS）是指发送信号的频率按照一定的规律在一个很宽的频带内跳变。例如，在 2.4GHz 频段内，信号频率可能会按照伪随机序列在多个频率点之间快速跳变，这样可以减少干扰。直接序列扩频（DSSS）则是将原始信号与一个高速的伪随机码序列进行模 2 加运算来扩展信号频谱，如在 802.11b 标准中就使用了 DSSS 技术，它可以提供相对稳定的传输速率和较强的抗干扰能力。

3. ### 根据所给的示意图，确定对应的是隐藏终端问题还是暴露终端问题，并能指出图中的隐藏站和暴露站分别是哪个设备。 

  - 隐藏终端问题
    - 当两个或多个终端（节点）可以与接入点（AP）通信，但它们彼此之间由于障碍物或距离等因素无法直接通信时，就会出现隐藏终端问题。例如，在一个 WLAN 环境中，有三个节点 A、B 和 AP。节点 A 和 B 都能与 AP 通信，但 A 和 B 之间无法直接通信。此时，如果 A 向 AP 发送数据，B 由于无法感知 A 的发送情况，也可能会向 AP 发送数据，从而导致在 AP 处发生碰撞。在这种情况下，A 和 B 互为隐藏终端。
  - 暴露终端问题
    - 当一个终端（节点）能够感知到另一个终端正在通信，但它本身的通信不会对正在进行的通信造成干扰时，就是暴露终端问题。例如，有四个节点 A、B、C 和 AP。A 正在向 AP 发送数据，C 能够感知到 A 的发送，但 C 与 AP 之间的通信不会干扰 A 和 AP 之间的通信。此时，C 就是暴露终端。C 可能会因为错误地认为信道忙而延迟自己的发送，降低了信道利用率。

4. ### 选择题：802.11 协议中，MAC 层使用的三种常用帧间间隔。 

   - 802.11 协议的 MAC 层有短帧间间隔（SIFS）、点协调功能帧间间隔（PIFS）和分布式协调功能帧间间隔（DIFS）。
     - **SIFS（Short Inter - Frame Spacing）**：是最短的帧间间隔，用于优先级最高的操作。例如，在一次数据传输过程中，当接收方成功接收一个数据帧后，会等待一个 SIFS 时间，然后发送确认（ACK）帧。因为 ACK 帧很重要，需要尽快发送，所以使用最短的帧间间隔，这样可以减少传输延迟，提高传输效率。
     - **PIFS（PCF Inter - Frame Spacing）**：用于点协调功能（PCF）下的操作，它比 SIFS 长。在 PCF 模式中，接入点（AP）可以以轮询的方式控制各个终端的接入，PIFS 就是用于这种轮询操作之间的间隔。
     - **DIFS（DCF Inter - Frame Spacing）**：用于分布式协调功能（DCF）下的操作，这是最长的帧间间隔。在 DCF 模式下，终端通过竞争信道来发送数据，在发送数据之前需要等待一个 DIFS 时间，以确保信道的空闲状态。

5. ### 选择题：以下哪些情况，需要执行 CSMA/CA 协议的退避算法？无线网络课件 p44。 

   - 在 802.11 无线网络中，CSMA/CA（载波监听多路访问 / 冲突避免）协议的退避算法主要在以下情况执行：
     - 当一个站点（节点）检测到信道忙，并且在等待信道空闲后，需要执行退避算法来确定何时可以尝试发送数据。例如，多个站点都在竞争信道，当一个站点发现信道空闲时，不能马上发送数据，而是要经过退避过程，以避免多个站点同时发送数据而产生冲突。
     - 在发送数据帧后没有收到接收方的确认（ACK）帧时，也需要执行退避算法。这可能是因为数据帧在传输过程中发生了冲突或者丢失，通过退避算法可以降低再次冲突的概率，重新尝试发送数据。

6. ### 能根据给定的无线网络通信场景，填写对应 802.11 数据帧的地址字段。 

   - 在 802.11 数据帧中，有四个地址字段（Address1 - Address4），它们的具体填写方式取决于通信场景。
     - **基本的单跳传输（从源站点到目的站点通过 AP）**：Address1 填写目的站点的 MAC 地址，Address2 填写 AP 的 MAC 地址，Address3 填写源站点的 MAC 地址，Address4 一般不使用。例如，一个笔记本电脑（源站点）通过无线接入点（AP）向另一台设备（目的站点）发送数据，就按照这个方式填写地址字段。
     - **多跳传输或特殊场景（如无线分布式系统 WDS）**：地址字段的填写会更加复杂，根据数据的流向和经过的节点来确定每个地址字段的值，可能会涉及到多个 AP 或者中继节点的 MAC 地址。

7. ### 选择题：无限个人局域网 WPAN 具体包括哪三种？ 

   - WPAN 主要包括蓝牙（Bluetooth）、紫蜂（ZigBee）和超宽带（UWB）。
     - **蓝牙（Bluetooth）**：它是一种短距离无线通信技术，广泛应用于连接手机、耳机、键盘等设备。其工作频段一般在 2.4GHz，传输距离较短，通常在 10 米左右，传输速率根据不同的版本有所不同，例如蓝牙 4.0 的传输速率可达 24Mbps 左右。
     - **紫蜂（ZigBee）**：主要用于低功耗、低数据速率的设备之间的通信，如智能家居设备。它的工作频段有 2.4GHz、868MHz（欧洲）和 915MHz（美国），传输距离一般在 10 - 100 米，传输速率较低，典型速率为 20 - 250kbps，非常适合用于电池供电的传感器等设备的长期工作。
     - **超宽带（UWB）**：它具有很高的带宽和较低的功率谱密度，能够实现高速率的数据传输和高精度的定位。例如，其传输速率可以达到几百 Mbps 甚至更高，工作频段范围较宽，传输距离一般在 10 米左右，主要应用于高速无线个人区域网络和高精度室内定位系统。

8. ### 选择题：未来无线通信市场的两大重要需求是什么？无线网络课件 p106 

   - 未来无线通信市场的两大重要需求通常是高数据速率和低功耗。
     - **高数据速率**：随着移动互联网的发展，用户对于视频流、云存储、在线游戏等数据密集型应用的需求不断增加，需要无线通信系统能够提供更高的传输速率，以满足用户对于快速下载、高清视频播放等体验的要求。例如，5G 通信技术的一个重要目标就是提供比 4G 更高的数据速率，支持如虚拟现实（VR）、增强现实（AR）等对带宽要求极高的应用。
     - **低功耗**：大量的物联网（IoT）设备需要长期工作，这些设备通常由电池供电，如智能传感器、可穿戴设备等。为了减少电池更换频率，延长设备的使用寿命，要求无线通信技术具备低功耗的特性。例如，ZigBee 和蓝牙低功耗（BLE）技术就是为了满足物联网设备低功耗需求而设计的。

9. ### 选择题：5G 通信的代表性技术。无线网络课件 p109 

   - 5G 通信的代表性技术包括大规模 MIMO（多输入多输出）、毫米波通信和网络切片。
     - **大规模 MIMO**：在基站端使用大量的天线（例如 64 个或更多）来同时服务多个用户。通过空间复用和波束赋形技术，可以大大提高频谱利用率和系统容量。例如，它能够在相同的频谱资源下，使数据传输速率成倍增加，同时增强信号覆盖范围和质量。
     - **毫米波通信**：利用毫米波频段（30 - 300GHz）进行通信。这个频段具有丰富的频谱资源，可以实现超高速的数据传输。不过，毫米波通信的传输距离相对较短，且容易受到障碍物的影响，需要更多的基站来实现覆盖。
     - **网络切片**：将物理网络按照不同的业务需求（如 eMBB - 增强移动宽带、mMTC - 海量机器类通信、uRLLC - 超高可靠低时延通信）划分为多个虚拟的逻辑网络切片。每个切片可以根据具体业务的要求进行资源分配和优化，例如，为自动驾驶车辆提供超低延迟的通信切片，为高清视频流提供高带宽的切片。

10. ### 判断题：表驱动路由和按需路由各自特点。表驱动路由：路由延时小，但是路由开销大；按需路由：路由延时大，但是路由开销小。 

    - 答案是正确的。
    - 表驱动路由
      - 表驱动路由协议要求每个节点维护一张包含到网络中所有其他节点的路由信息表。例如，距离矢量路由协议（如 RIP）和链路状态路由协议（如 OSPF）都属于表驱动路由协议。
      - 由于节点已经提前知道到其他节点的路由信息，当有数据需要发送时，可以立即进行转发，所以路由延时小。但是，为了维护这张完整的路由表，节点需要不断地与其他节点交换路由信息，这会消耗大量的网络带宽和节点的计算资源，导致路由开销大。
    - 按需路由
      - 按需路由协议是在需要发送数据时才去寻找路由。例如，动态源路由（DSR）和 Ad - hoc 按需距离矢量路由（AODV）协议。
      - 当没有数据传输需求时，节点不需要维护到所有其他节点的路由信息，只有在需要发送数据时才启动路由发现过程，所以路由开销小。然而，这个路由发现过程会花费一定的时间，导致路由延时大。

11. ### 表驱动路由/按需路由/混合路由与具体协议的配对，只需关注课上介绍的 4 个具体协议即可。 

    - 表驱动路由协议

      ：OSPF（开放式最短路径优先）和 RIP（路由信息协议）。

      - **OSPF**：它是一种链路状态路由协议，每个节点维护整个网络的链路状态数据库，通过 Dijkstra 算法计算到其他节点的最短路径，形成路由表。它能够快速收敛，适用于大型网络，但计算和存储开销较大。
      - **RIP**：是距离矢量路由协议，通过定期交换路由信息来更新路由表，以跳数作为度量标准。它的实现相对简单，但存在收敛慢、容易产生路由环路等问题。

    - 按需路由协议

      ：DSR（动态源路由）和 AODV（Ad - hoc 按需距离矢量路由）。

      - **DSR**：在发送数据时，源节点通过发送路由请求（RREQ）消息来发现到达目的节点的路由。中间节点将自己知道的路由信息添加到 RREQ 消息中，当目的节点收到 RREQ 消息后，会发送路由回复（RREP）消息，将完整的路由信息返回给源节点。源节点根据收到的路由信息进行数据发送，并且缓存这条路由信息，以备后续使用。
      - **AODV**：也是按需进行路由发现。当源节点需要发送数据到目的节点时，如果没有到目的节点的有效路由，就会广播 RREQ 消息。中间节点收到 RREQ 消息后，会记录到源节点的反向路径，当目的节点或知道到目的节点路由的中间节点收到 RREQ 消息后，会发送 RREP 消息，沿着反向路径返回给源节点，建立起正向的路由。

    - **混合路由协议**：结合了表驱动路由和按需路由的特点，在某些方面具有更好的性能，但具体的协议配对可能因教材或课程内容而异。

12. ### 根据具体网络拓扑结构，填写 DSR 路由协议中 RREQ 和 RREP 报文中的路由信息，注意相关网络是否含有非对称信道。无线网络课件 p148-p151 

    - RREQ（路由请求）报文的路由信息填写
      - 在源节点发送 RREQ 报文时，会将自己的地址添加到路由记录中。当 RREQ 报文在网络中传播时，每个中间节点收到报文后，会将自己的地址添加到路由记录中。如果网络中存在非对称信道，需要特别注意节点之间的可达性。例如，节点 A 可以向节点 B 发送信号，但节点 B 无法向节点 A 发送信号，这种情况下，在填写 RREQ 报文的路由信息时，要考虑到这种单向链路的情况，避免使用不可达的反向路径。
    - RREP（路由回复）报文的路由信息填写
      - 当目的节点收到 RREQ 报文后，会根据 RREQ 报文中的路由记录生成 RREP 报文。RREP 报文的路由信息是 RREQ 报文中路由记录的反向路径。例如，RREQ 报文的路由记录是源节点 - 中间节点 1 - 中间节点 2 - 目的节点，那么 RREP 报文的路由记录就是目的节点 - 中间节点 2 - 中间节点 1 - 源节点。在含有非对称信道的网络中，同样要检查反向路径的可达性，确保 RREP 报文能够正确地返回源节点。

13. ### 选择题：DSDV 路由选择指标：目的序号、代价（metric）。 

    - 在 DSDV（目的序列距离矢量）路由协议中，目的序号和代价是重要的路由选择指标。
      - **目的序号**：用于区分路由信息的新旧程度。每个节点维护的路由表中包含到各个目的节点的目的序号。当一个节点收到包含目的节点的路由信息时，如果新收到的目的序号大于自己路由表中的目的序号，就会更新路由表。这可以避免使用过期的路由信息，防止路由环路的产生。
      - **代价（metric）**：通常以跳数作为代价度量。节点在选择路由时，除了考虑目的序号外，还会选择跳数最少（代价最小）的路径。例如，有两条到目的节点的路径，一条跳数为 3，另一条跳数为 5，节点会优先选择跳数为 3 的路径。

14. ### DSDV 路由协议中的路由表更新，关注路由通告、新节点加入和链路断开 3 种情况。 

    * 路由通告
      - 每个节点定期向外广播自己的路由表信息，称为路由通告。当一个节点收到其他节点的路由通告时，会根据目的序号和代价来更新自己的路由表。如果收到的路由信息中的目的序号比自己路由表中的大，或者目的序号相同但代价更小，就会更新相应的路由条目。例如，节点 A 的路由表中有到节点 C 的路由，跳数为 4，当收到节点 B 的路由通告显示到节点 C 的跳数为 3 时，节点 A 会更新自己的路由表，将到节点 C 的跳数更新为 3，并记录下一跳为节点 B。

    - 新节点加入
      - 当一个新节点加入网络时，它会广播自己的存在以及初始的路由信息（可能只有到自己的路由，跳数为 0）。周围的节点收到这个广播后，会将新节点的信息添加到自己的路由表中。例如，新节点 D 加入网络，它广播自己的信息，周围的节点 E 和 F 收到后，会在自己的路由表中添加到节点 D 的路由条目，下一跳指向节点 D，跳数为 1。
    - 链路断开
      - 当节点检测到与某个相邻节点的链路断开时，会更新自己的路由表。它会将通过该链路到达的目的节点的路由标记为不可用或者更新为一个较大的代价（如设置跳数为无穷大）。同时，它会再次广播自己的路由表，告知其他节点这条链路的变化。例如，节点 G 和节点 H 之间的链路断开，节点 G 会将通过节点 H 到达的目的节点的路由信息更新，然后广播

15. ### 选择题：DSDV 路由协议通过设置沉淀时间来减缓路由波动。 

    - 在 DSDV 协议中，沉淀时间是一个重要的机制。当节点收到新的路由信息时，不会立即更新路由表，而是等待沉淀时间结束后再进行更新。这是因为在动态的网络环境中，路由信息可能会频繁变化。例如，由于无线信号的干扰或者节点的移动，可能会导致短时间内收到多个不同的路由更新信息。通过设置沉淀时间，可以避免因为这些临时的、不稳定的路由信息而频繁更新路由表，从而减缓路由波动，减少网络开销，提高网络的稳定性。

16. ### 选择题：AODV 路由协议的特点：按需路由中体现表驱动路由特性：RREQ 和 RREP 报文中，使用“目的序号”字段取代“路由信息”字段；表驱动路由中体现按需路由特性：路由表的更新采用按需驱动的路由机制；链路中断发送 RERR 报文。 

    - 按需路由中体现表驱动路由特性
      - 在 AODV 的 RREQ（路由请求）和 RREP（路由回复）报文中使用 “目的序号” 字段。这个字段类似于表驱动路由协议中的序列号机制，用于判断路由信息的新旧。当一个节点收到 RREQ 或 RREP 报文时，会比较其中的目的序号与自己路由表中的目的序号。如果收到的目的序号更新，就更新自己的路由信息。这样可以避免使用旧的或可能形成环路的路由，就像表驱动路由协议通过序列号来维护路由信息的时效性一样。
    - 表驱动路由中体现按需路由特性
      - AODV 的路由表更新是按需驱动的。与传统表驱动路由协议（如 OSPF、RIP）不同，AODV 的节点不会周期性地交换路由信息来更新整个路由表。只有当节点需要发送数据，即有路由需求时，才会启动路由发现过程（发送 RREQ 报文）。在这个过程中，根据收到的 RREP 报文来更新路由表，并且只更新与本次通信相关的路由条目，而不是像表驱动路由那样维护所有可能的路由信息，从而减少了不必要的路由更新开销。
    - 链路中断发送 RERR 报文
      - 当 AODV 网络中的链路中断时，检测到链路中断的节点会发送 RERR（路由错误）报文。这个报文会通知其他节点链路出现问题，相关的路由不可用。收到 RERR 报文的节点会根据报文中的信息更新自己的路由表，将经过中断链路的路由标记为无效或者更新为其他可用的路由，以避免继续使用无效的路由，保证网络的正常通信。

17. ### 判断题：ZRP 路由协议中，区域内和区域外分别采用什么路由机制？

    - 在 ZRP（区域路由协议）中，区域内采用先应式（表驱动）路由机制，区域外采用反应式（按需）路由机制。
    - 在区域内，每个节点维护一个到区域内其他节点的完整路由表，通过周期性的路由信息交换来保持路由表的更新，就像传统的表驱动路由协议一样。这样可以保证在区域内快速地进行路由转发，因为节点已经提前知道到区域内其他节点的路由。
    - 对于区域外的节点，当需要向区域外的节点发送数据时，才会启动按需路由发现过程。这种混合的路由机制结合了表驱动路由和按需路由的优点，既可以在局部区域内实现快速路由，又可以在整个网络范围内通过按需路由发现来减少不必要的路由开销。

    ###  

# 移动 IP 技术 

1. ### 选择题：移动 IP 技术涉及的 3 个核心模块：代理通告报文、转交地址 CoA、隧道技术。 

   - **代理通告报文**：用于移动节点发现家乡代理和外地代理。家乡代理通过发送代理通告报文，向移动节点告知自己的存在和相关信息，如网络前缀等。外地代理也会发送代理通告报文，让移动节点知道它可以提供服务来帮助移动节点连接到外部网络。
   - **转交地址 CoA**：是移动节点在外地网络中的临时地址。当移动节点移动到外地网络时，会获得一个转交地址，外部网络通过这个地址来转发数据给移动节点。这个地址使得移动节点能够在不同的网络之间保持通信。
   - **隧道技术**：用于在移动节点的家乡网络和外地网络之间传输数据。当通信对端发送数据给移动节点的家乡地址时，家乡代理会将数据通过隧道封装，发送到移动节点的转交地址。这样可以保证数据能够正确地到达移动节点，即使它已经不在家乡网络中。

2. ### 选择题：移动 IP 技术涉及的 3 个主要功能：代理发现、注册、路由技术。 

   - **代理发现**：移动节点通过接收代理通告报文来发现家乡代理和外地代理。这是移动节点接入网络并获取网络服务的第一步，它可以确定自己所在的位置（是在家乡网络还是外地网络）以及可以使用的代理服务器。
   - **注册**：移动节点在获得转交地址后，需要向家乡代理进行注册。注册过程包括向家乡代理发送注册请求，告知家乡代理自己的转交地址等信息。家乡代理收到注册请求后，会对移动节点的身份进行验证，并更新自己的路由信息，以便能够正确地将数据转发给移动节点。
   - **路由技术**：主要涉及如何将数据从通信对端正确地路由到移动节点。在移动 IP 中，通过隧道技术和对转交地址的使用，实现数据的转发。当移动节点在家乡网络时，数据可以直接发送到其家乡地址；当移动节点在外地网络时，数据通过家乡代理和隧道技术发送到其转交地址，从而保证移动节点在不同网络位置时都能接收到数据。

3. ### 选择题：隧道封装技术一般包含哪 3 种？ 

   - **IP - in - IP 封装**：这是最基本的隧道封装方式。将原始的 IP 数据包（包括头部和数据部分）作为新的 IP 数据包的数据部分，然后在外面添加新的 IP 头部。新的 IP 头部中的源地址是隧道的入口地址（如家乡代理的地址），目的地址是隧道的出口地址（如移动节点的转交地址）。这样，数据包就可以通过中间网络（如 Internet）从入口地址传输到出口地址。
   - **GRE（通用路由封装）**：GRE 可以封装多种协议的数据包，不仅仅是 IP 协议。它在 IP - in - IP 封装的基础上提供了更灵活的功能，例如可以支持多种网络层协议的传输，并且可以携带更多的控制信息。GRE 封装后的数据包同样有一个外层的 IP 头部用于在隧道中传输，而内部可以是不同协议的数据包。
   - **L2TP（第二层隧道协议）**：主要用于在第二层（如数据链路层）建立隧道。它可以在多种网络接入方式（如 PPP 连接）上建立隧道，将 PPP 帧封装在 L2TP 隧道中进行传输。L2TP 通常需要和 IP 协议一起使用，外层是 IP 头部用于在网络中路由，内部是 L2TP 封装的 PPP 帧，这种方式常用于虚拟专用网络（VPN）等场景。

4. ### 移动 IPv4：三角路由，通信对端只能通过家乡网络，与处在外地网络的移动节点进行通信；移动 IPv6：最优路由，通过通信对端绑定，实现通信对端与移动节点的直接通信。 

  - 移动 IPv4 三角路由
    - 在移动 IPv4 中，当通信对端（如一个固定的服务器）要与移动节点通信时，通信对端首先将数据发送到移动节点的家乡地址。数据到达家乡网络后，由家乡代理接收，家乡代理再通过隧道技术将数据转发到移动节点的转交地址。移动节点回复数据时，会直接发送给通信对端。这样就形成了一个三角形的通信路径，这种方式可能会导致额外的传输延迟和网络开销，因为数据需要经过家乡代理的中转。
  - 移动 IPv6 最优路由
    - 移动 IPv6 引入了通信对端绑定的机制。移动节点在移动到外地网络后，会向通信对端发送绑定更新消息，告知通信对端自己的转交地址。通信对端收到绑定更新消息后，会将移动节点的转交地址和家乡地址进行绑定，之后通信对端就可以直接将数据发送到移动节点的转交地址，而不需要经过家乡网络的中转，实现了更优化的直接通信路径，减少了传输延迟和网络开销。